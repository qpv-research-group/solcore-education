<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Solcore Education - Textured Si: diffraction grating and pyramids</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Solcore Education</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../solar-cell-simulation/tutorials.html" rel="" target="">
 <span class="menu-text">Tutorials</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../solcore-workshop/workshop2023.html" rel="" target="">
 <span class="menu-text">Solcore Workshop 2023 (SKKU)</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../solcore-workshop-2/workshop2023.html" rel="" target="">
 <span class="menu-text">Solcore Workshop 2023 (UNSW)</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#setting-up" id="toc-setting-up" class="nav-link active" data-scroll-target="#setting-up">Setting up</a></li>
  <li><a href="#defining-the-structures" id="toc-defining-the-structures" class="nav-link" data-scroll-target="#defining-the-structures">Defining the structures</a></li>
  <li><a href="#calculating-rat" id="toc-calculating-rat" class="nav-link" data-scroll-target="#calculating-rat">Calculating R/A/T</a></li>
  <li><a href="#plotting" id="toc-plotting" class="nav-link" data-scroll-target="#plotting">Plotting</a></li>
  <li><a href="#redistribution-matrices" id="toc-redistribution-matrices" class="nav-link" data-scroll-target="#redistribution-matrices">Redistribution matrices</a></li>
  <li><a href="#questions" id="toc-questions" class="nav-link" data-scroll-target="#questions">Questions</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content column-page-left" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Textured Si: diffraction grating and pyramids</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>This example is based on Figures 6, 7 and 8 from <a href="https://doi.org/10.1364/OE.23.0A1720">this paper</a>. This compares three different structures, all based on a 200 micron thick slab of silicon with different surface textures:</p>
<ol type="1">
<li>Planar front surface (TMM), crossed grating at rear (RCWA)</li>
<li>Inverted pyramids on the front surface (RT_Fresnel), planar rear surface (TMM)</li>
<li>Inverted pyramids on the front surface (RT_Fresnel), crossed grating at rear (RCWA)</li>
</ol>
<p>The methods which will be used to calculate the redistribution matrices in each case are given in brackets. If case 1 and 2 are calculated first, then case 3 does not require the calculations of any additional matrices, since it will use the rear matrix from (1) and the front matrix from (2).</p>
<section id="setting-up" class="level2">
<h2 class="anchored" data-anchor-id="setting-up">Setting up</h2>
<p>First, importing relevant packages:</p>
<div class="cell" data-executetime="{&quot;end_time&quot;:&quot;2023-11-15T09:07:26.494790Z&quot;,&quot;start_time&quot;:&quot;2023-11-15T09:07:25.022732Z&quot;}" data-jupyter="{&quot;outputs_hidden&quot;:false}" data-execution_count="22">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># solcore imports</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> solcore.structure <span class="im">import</span> Layer</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> solcore <span class="im">import</span> material</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> solcore <span class="im">import</span> si</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> rayflare.structure <span class="im">import</span> Interface, BulkLayer, Structure</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> rayflare.matrix_formalism <span class="im">import</span> process_structure, calculate_RAT</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> rayflare.utilities <span class="im">import</span> get_savepath</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> rayflare.transfer_matrix_method <span class="im">import</span> tmm_structure</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> rayflare.angles <span class="im">import</span> theta_summary, make_angle_vector</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> rayflare.textures <span class="im">import</span> regular_pyramids</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> rayflare.options <span class="im">import</span> default_options</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib <span class="im">as</span> mpl</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sparse <span class="im">import</span> load_npz</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Setting options (taking the default options for everything not specified explicitly):</p>
<div class="cell" data-executetime="{&quot;end_time&quot;:&quot;2023-11-15T09:07:32.483132Z&quot;,&quot;start_time&quot;:&quot;2023-11-15T09:07:32.464888Z&quot;}" data-jupyter="{&quot;outputs_hidden&quot;:false}" data-execution_count="23">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>angle_degrees_in <span class="op">=</span> <span class="dv">8</span> <span class="co"># same as in Fraunhofer paper</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>wavelengths <span class="op">=</span> np.linspace(<span class="dv">900</span>, <span class="dv">1200</span>, <span class="dv">20</span>) <span class="op">*</span> <span class="fl">1e-9</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>Si <span class="op">=</span> material(<span class="st">"Si"</span>)()</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>Air <span class="op">=</span> material(<span class="st">"Air"</span>)()</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>options <span class="op">=</span> default_options()</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>options.wavelength <span class="op">=</span> wavelengths</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>options.theta_in <span class="op">=</span> angle_degrees_in <span class="op">*</span> np.pi <span class="op">/</span> <span class="dv">180</span> <span class="co"># incidence angle (polar angle) in radians</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>options.n_theta_bins <span class="op">=</span> <span class="dv">30</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>options.c_azimuth <span class="op">=</span> <span class="fl">0.25</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>options.n_rays <span class="op">=</span> <span class="fl">5e4</span> <span class="co"># number of rays per wavelength in ray-tracing</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>options.project_name <span class="op">=</span> <span class="st">"OPTOS_comparison"</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="co"># options.orders = 60 # number of RCWA orders to use (more = better convergence, but slower)</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>options.pol <span class="op">=</span> <span class="st">"u"</span> <span class="co"># unpolarized light</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>options.only_incidence_angle <span class="op">=</span> <span class="va">True</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>options.RCWA_method <span class="op">=</span> <span class="st">"Inkstone"</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>options.parallel <span class="op">=</span> <span class="va">True</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="defining-the-structures" class="level2">
<h2 class="anchored" data-anchor-id="defining-the-structures">Defining the structures</h2>
<p>Now, set up the grating basis vectors for the RCWA calculations and define the grating structure. These are squares, rotated by 45 degrees. The halfwidth is calculated based on the area fill factor of the etched pillars given in the paper.</p>
<div class="cell" data-executetime="{&quot;end_time&quot;:&quot;2023-11-15T09:07:34.414573Z&quot;,&quot;start_time&quot;:&quot;2023-11-15T09:07:34.408237Z&quot;}" data-jupyter="{&quot;outputs_hidden&quot;:false}" data-execution_count="24">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> <span class="dv">1000</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>d_vectors <span class="op">=</span> ((x, <span class="dv">0</span>), (<span class="dv">0</span>, x))</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>area_fill_factor <span class="op">=</span> <span class="fl">0.36</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>hw <span class="op">=</span> np.sqrt(area_fill_factor) <span class="op">*</span> <span class="dv">500</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>back_materials <span class="op">=</span> [</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>    Layer(width<span class="op">=</span>si(<span class="st">"120nm"</span>), material<span class="op">=</span>Si,</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>        geometry<span class="op">=</span>[{<span class="st">"type"</span>: <span class="st">"rectangle"</span>, <span class="st">"mat"</span>: Air, <span class="st">"center"</span>: (x <span class="op">/</span> <span class="dv">2</span>, x <span class="op">/</span> <span class="dv">2</span>),</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>                <span class="st">"halfwidths"</span>: (hw, hw), <span class="st">"angle"</span>: <span class="dv">45</span>}],</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>    )]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now we define the pyramid texture for the front surface in case (2) and (3) and make the four possible different surfaces: planar front and rear, front with pyramids, rear with grating. We specify the method to use to calculate the redistribution matrices in each case and create the bulk layer.</p>
<div class="cell" data-executetime="{&quot;end_time&quot;:&quot;2023-11-15T09:07:35.630980Z&quot;,&quot;start_time&quot;:&quot;2023-11-15T09:07:35.626657Z&quot;}" data-jupyter="{&quot;outputs_hidden&quot;:false}" data-execution_count="25">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>surf <span class="op">=</span> regular_pyramids(elevation_angle<span class="op">=</span><span class="dv">55</span>, upright<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>front_surf_pyramids <span class="op">=</span> Interface(</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"RT_Fresnel"</span>,</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    texture<span class="op">=</span>surf,</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    layers<span class="op">=</span>[],</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    name<span class="op">=</span><span class="st">"inv_pyramids_front_"</span> <span class="op">+</span> <span class="bu">str</span>(options[<span class="st">"n_rays"</span>]),</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>front_surf_planar <span class="op">=</span> Interface(<span class="st">"TMM"</span>, layers<span class="op">=</span>[], name<span class="op">=</span><span class="st">"planar_front"</span>)</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>back_surf_grating <span class="op">=</span> Interface(</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">"RCWA"</span>,</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>    layers<span class="op">=</span>back_materials,</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>    name<span class="op">=</span><span class="st">"crossed_grating_back"</span>,</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>    d_vectors<span class="op">=</span>d_vectors,</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>    rcwa_orders<span class="op">=</span><span class="dv">30</span>,</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>back_surf_planar <span class="op">=</span> Interface(<span class="st">"TMM"</span>, layers<span class="op">=</span>[], name<span class="op">=</span><span class="st">"planar_back"</span>)</span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>bulk_Si <span class="op">=</span> BulkLayer(<span class="fl">200e-6</span>, Si, name<span class="op">=</span><span class="st">"Si_bulk"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now we create the different structures and ‘process’ them (this will calculate the relevant matrices if necessary, or do nothing if it finds the matrices have previously been calculated and the files already exist). We don’t need to process the final structure because it will use matrices calculated for <code>SC_fig6</code> and <code>SC_fig7</code>.</p>
<div class="cell" data-executetime="{&quot;end_time&quot;:&quot;2023-11-15T09:07:41.065063Z&quot;,&quot;start_time&quot;:&quot;2023-11-15T09:07:38.929572Z&quot;}" data-jupyter="{&quot;outputs_hidden&quot;:false}" data-execution_count="26">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>capture</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>SC_fig6 <span class="op">=</span> Structure([front_surf_planar, bulk_Si, back_surf_grating], incidence<span class="op">=</span>Air, transmission<span class="op">=</span>Air)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>SC_fig7 <span class="op">=</span> Structure([front_surf_pyramids, bulk_Si, back_surf_planar], incidence<span class="op">=</span>Air, transmission<span class="op">=</span>Air)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>SC_fig8 <span class="op">=</span> Structure([front_surf_pyramids, bulk_Si, back_surf_grating], incidence<span class="op">=</span>Air, transmission<span class="op">=</span>Air)</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>process_structure(SC_fig6, options, save_location<span class="op">=</span><span class="st">'current'</span>) <span class="co"># if you want to overwrite previous results, add overwrite=Trues</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>process_structure(SC_fig7, options, save_location<span class="op">=</span><span class="st">'current'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>INFO: Making matrix for planar surface using TMM for element 0 in structure
INFO: RCWA calculation for element 2 in structure
INFO: RCWA calculation for wavelength = 900.0000000000001 nm
INFO: RCWA calculation for wavelength = 915.7894736842105 nm
INFO: RCWA calculation for wavelength = 931.578947368421 nm
INFO: RCWA calculation for wavelength = 947.3684210526316 nm
INFO: RCWA calculation for wavelength = 963.1578947368421 nm
INFO: RCWA calculation for wavelength = 978.9473684210526 nm
INFO: RCWA calculation for wavelength = 1010.5263157894736 nm
INFO: RCWA calculation for wavelength = 994.7368421052631 nm
INFO: RCWA calculation for wavelength = 1026.3157894736842 nm
INFO: RCWA calculation for wavelength = 1042.1052631578948 nm
INFO: RCWA calculation for wavelength = 1057.8947368421054 nm
INFO: RCWA calculation for wavelength = 1073.6842105263158 nm
INFO: RCWA calculation for wavelength = 1089.4736842105265 nm
INFO: RCWA calculation for wavelength = 1105.2631578947369 nm
INFO: RCWA calculation for wavelength = 1121.0526315789475 nm
INFO: RCWA calculation for wavelength = 1136.842105263158 nm
INFO: RCWA calculation for wavelength = 1152.6315789473683 nm
INFO: RCWA calculation for wavelength = 1168.421052631579 nm
INFO: RCWA calculation for wavelength = 1184.2105263157896 nm
INFO: RCWA calculation for wavelength = 1200.0000000000002 nm
INFO: Ray tracing with Fresnel equations for element 0 in structure
INFO: Calculating matrix only for incidence theta/phi
INFO: RT calculation for wavelength = 900.0000000000001 nm
INFO: RT calculation for wavelength = 915.7894736842105 nm
INFO: RT calculation for wavelength = 947.3684210526316 nm
INFO: RT calculation for wavelength = 963.1578947368421 nm
INFO: RT calculation for wavelength = 931.578947368421 nm
INFO: RT calculation for wavelength = 978.9473684210526 nm
INFO: RT calculation for wavelength = 994.7368421052631 nm
INFO: RT calculation for wavelength = 1010.5263157894736 nm
INFO: RT calculation for wavelength = 1026.3157894736842 nm
INFO: RT calculation for wavelength = 1042.1052631578948 nm
INFO: RT calculation for wavelength = 1057.8947368421054 nm
INFO: RT calculation for wavelength = 1073.6842105263158 nm
INFO: RT calculation for wavelength = 1089.4736842105265 nm
INFO: RT calculation for wavelength = 1105.2631578947369 nm
INFO: RT calculation for wavelength = 1121.0526315789475 nm
INFO: RT calculation for wavelength = 1136.842105263158 nm
INFO: RT calculation for wavelength = 1152.6315789473683 nm
INFO: RT calculation for wavelength = 1168.421052631579 nm
INFO: RT calculation for wavelength = 1184.2105263157896 nm
INFO: RT calculation for wavelength = 1200.0000000000002 nm
INFO: RT calculation for wavelength = 915.7894736842105 nm
INFO: RT calculation for wavelength = 900.0000000000001 nm
INFO: RT calculation for wavelength = 931.578947368421 nm
INFO: RT calculation for wavelength = 947.3684210526316 nm
INFO: RT calculation for wavelength = 963.1578947368421 nm
INFO: RT calculation for wavelength = 994.7368421052631 nm
INFO: RT calculation for wavelength = 978.9473684210526 nm
INFO: RT calculation for wavelength = 1010.5263157894736 nm
INFO: RT calculation for wavelength = 1026.3157894736842 nm
INFO: RT calculation for wavelength = 1042.1052631578948 nm
INFO: RT calculation for wavelength = 1057.8947368421054 nm
INFO: RT calculation for wavelength = 1073.6842105263158 nm
INFO: RT calculation for wavelength = 1089.4736842105265 nm
INFO: RT calculation for wavelength = 1105.2631578947369 nm
INFO: RT calculation for wavelength = 1121.0526315789475 nm
INFO: RT calculation for wavelength = 1136.842105263158 nm
INFO: RT calculation for wavelength = 1152.6315789473683 nm
INFO: RT calculation for wavelength = 1168.421052631579 nm
INFO: RT calculation for wavelength = 1184.2105263157896 nm
INFO: RT calculation for wavelength = 1200.0000000000002 nm
INFO: Making matrix for planar surface using TMM for element 2 in structure</code></pre>
</div>
</div>
</section>
<section id="calculating-rat" class="level2">
<h2 class="anchored" data-anchor-id="calculating-rat">Calculating R/A/T</h2>
<p>Then we ask RayFlare to calculate the reflection, transmission and absorption through matrix multiplication, and get the required result out (absorption in the bulk) for each cell. We also load the results from the reference paper to compare them to the ones calculated with RayFlare.</p>
<div class="cell" data-jupyter="{&quot;outputs_hidden&quot;:false}" data-execution_count="27">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>capture</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>results_fig6 <span class="op">=</span> calculate_RAT(SC_fig6, options, save_location<span class="op">=</span><span class="st">'current'</span>)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>results_fig7 <span class="op">=</span> calculate_RAT(SC_fig7, options, save_location<span class="op">=</span><span class="st">'current'</span>)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>results_fig8 <span class="op">=</span> calculate_RAT(SC_fig8, options, save_location<span class="op">=</span><span class="st">'current'</span>)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>RAT_fig6 <span class="op">=</span> results_fig6[<span class="dv">0</span>]</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>RAT_fig7 <span class="op">=</span> results_fig7[<span class="dv">0</span>]</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>RAT_fig8 <span class="op">=</span> results_fig8[<span class="dv">0</span>]</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>sim_fig6 <span class="op">=</span> np.loadtxt(<span class="st">"data/optos_fig6_sim.csv"</span>, delimiter<span class="op">=</span><span class="st">","</span>)</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>sim_fig7 <span class="op">=</span> np.loadtxt(<span class="st">"data/optos_fig7_sim.csv"</span>, delimiter<span class="op">=</span><span class="st">","</span>)</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>sim_fig8 <span class="op">=</span> np.loadtxt(<span class="st">"data/optos_fig8_sim.csv"</span>, delimiter<span class="op">=</span><span class="st">","</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>INFO: After iteration 1: maximum power fraction remaining = 0.3147547844901925
INFO: After iteration 2: maximum power fraction remaining = 0.26488646733006893
INFO: After iteration 3: maximum power fraction remaining = 0.23269554942010684
INFO: After iteration 4: maximum power fraction remaining = 0.20578380258355025
INFO: After iteration 5: maximum power fraction remaining = 0.18307141658083748
INFO: After iteration 6: maximum power fraction remaining = 0.1637219102470247
INFO: After iteration 7: maximum power fraction remaining = 0.14714910204177287
INFO: After iteration 8: maximum power fraction remaining = 0.13288656305286478
INFO: After iteration 9: maximum power fraction remaining = 0.12055930469248763
INFO: After iteration 10: maximum power fraction remaining = 0.10986019881035203
INFO: After iteration 11: maximum power fraction remaining = 0.10053607370251534
INFO: After iteration 12: maximum power fraction remaining = 0.09237713790148333
INFO: After iteration 13: maximum power fraction remaining = 0.08520886687832208
INFO: After iteration 14: maximum power fraction remaining = 0.0788855889948453
INFO: After iteration 15: maximum power fraction remaining = 0.07328535247639956
INFO: After iteration 16: maximum power fraction remaining = 0.06830577741010184
INFO: After iteration 17: maximum power fraction remaining = 0.06386068307843429
INFO: After iteration 18: maximum power fraction remaining = 0.05987733356284154
INFO: After iteration 19: maximum power fraction remaining = 0.05629418057339303
INFO: After iteration 20: maximum power fraction remaining = 0.0530590083118345
INFO: After iteration 21: maximum power fraction remaining = 0.050127404656592524
INFO: After iteration 22: maximum power fraction remaining = 0.047461498045875336
INFO: After iteration 23: maximum power fraction remaining = 0.045028911306820844
INFO: After iteration 24: maximum power fraction remaining = 0.04280189309886298
INFO: After iteration 25: maximum power fraction remaining = 0.04075659515037211
INFO: After iteration 26: maximum power fraction remaining = 0.038872469475235455
INFO: After iteration 27: maximum power fraction remaining = 0.03713176457366855
INFO: After iteration 28: maximum power fraction remaining = 0.03551910349430494
INFO: After iteration 29: maximum power fraction remaining = 0.03402112975551302
INFO: After iteration 30: maximum power fraction remaining = 0.032626209645374105
INFO: After iteration 31: maximum power fraction remaining = 0.03132418146241775
INFO: After iteration 32: maximum power fraction remaining = 0.03010614391856444
INFO: After iteration 33: maximum power fraction remaining = 0.028964277277513318
INFO: After iteration 34: maximum power fraction remaining = 0.027891691906174458
INFO: After iteration 35: maximum power fraction remaining = 0.0268822998215131
INFO: After iteration 36: maximum power fraction remaining = 0.0259307055584597
INFO: After iteration 37: maximum power fraction remaining = 0.025032113296785112
INFO: After iteration 38: maximum power fraction remaining = 0.024182247690420135
INFO: After iteration 39: maximum power fraction remaining = 0.02337728626118793
INFO: After iteration 40: maximum power fraction remaining = 0.022613801566086604
INFO: After iteration 41: maximum power fraction remaining = 0.02188871163585434
INFO: After iteration 42: maximum power fraction remaining = 0.021199237422906875
INFO: After iteration 43: maximum power fraction remaining = 0.020542866197268028
INFO: After iteration 44: maximum power fraction remaining = 0.019917319996684207
INFO: After iteration 45: maximum power fraction remaining = 0.019320528377345426
INFO: After iteration 46: maximum power fraction remaining = 0.018750604829146936
INFO: After iteration 47: maximum power fraction remaining = 0.018205826318019654
INFO: After iteration 48: maximum power fraction remaining = 0.017684615500675037
INFO: After iteration 49: maximum power fraction remaining = 0.017185525226750514
INFO: After iteration 50: maximum power fraction remaining = 0.016707225001959973
INFO: After iteration 51: maximum power fraction remaining = 0.016248489135243467
INFO: After iteration 52: maximum power fraction remaining = 0.015808186334561478
INFO: After iteration 53: maximum power fraction remaining = 0.015385270551136398
INFO: After iteration 54: maximum power fraction remaining = 0.014978772901646063
INFO: After iteration 55: maximum power fraction remaining = 0.014587794522988966
INFO: After iteration 56: maximum power fraction remaining = 0.014211500235496196
INFO: After iteration 57: maximum power fraction remaining = 0.013849112908469175
INFO: After iteration 58: maximum power fraction remaining = 0.013499908437186743
INFO: After iteration 59: maximum power fraction remaining = 0.013163211253478645
INFO: After iteration 60: maximum power fraction remaining = 0.012838390302965243
INFO: After iteration 61: maximum power fraction remaining = 0.012524855431418591
INFO: After iteration 62: maximum power fraction remaining = 0.01222205413066281
INFO: After iteration 63: maximum power fraction remaining = 0.011929468601216221
INFO: After iteration 64: maximum power fraction remaining = 0.011646613094665394
INFO: After iteration 65: maximum power fraction remaining = 0.01137303150370423
INFO: After iteration 66: maximum power fraction remaining = 0.01110829517199786
INFO: After iteration 67: maximum power fraction remaining = 0.010852000899650596
INFO: After iteration 68: maximum power fraction remaining = 0.010603769123160458
INFO: After iteration 69: maximum power fraction remaining = 0.01036324225140776
INFO: After iteration 70: maximum power fraction remaining = 0.010130083141517249
INFO: After iteration 71: maximum power fraction remaining = 0.009903973700407609
INFO: After iteration 1: maximum power fraction remaining = 0.6965599807904936
INFO: After iteration 2: maximum power fraction remaining = 0.563969701000487
INFO: After iteration 3: maximum power fraction remaining = 0.5211473528500719
INFO: After iteration 4: maximum power fraction remaining = 0.45114105474022054
INFO: After iteration 5: maximum power fraction remaining = 0.40800132751185514
INFO: After iteration 6: maximum power fraction remaining = 0.35608655120887633
INFO: After iteration 7: maximum power fraction remaining = 0.3206871884192381
INFO: After iteration 8: maximum power fraction remaining = 0.2818708654979915
INFO: After iteration 9: maximum power fraction remaining = 0.25330222148861653
INFO: After iteration 10: maximum power fraction remaining = 0.22373360840898793
INFO: After iteration 11: maximum power fraction remaining = 0.20072528723530697
INFO: After iteration 12: maximum power fraction remaining = 0.1779254944043747
INFO: After iteration 13: maximum power fraction remaining = 0.15942400813738253
INFO: After iteration 14: maximum power fraction remaining = 0.14166488288482385
INFO: After iteration 15: maximum power fraction remaining = 0.12681463105843302
INFO: After iteration 16: maximum power fraction remaining = 0.1128794594978319
INFO: After iteration 17: maximum power fraction remaining = 0.10097909333367672
INFO: After iteration 18: maximum power fraction remaining = 0.08998681013003268
INFO: After iteration 19: maximum power fraction remaining = 0.08046232125130436
INFO: After iteration 20: maximum power fraction remaining = 0.07175954781299133
INFO: After iteration 21: maximum power fraction remaining = 0.06414362843595126
INFO: After iteration 22: maximum power fraction remaining = 0.0572360500839504
INFO: After iteration 23: maximum power fraction remaining = 0.05115025866725291
INFO: After iteration 24: maximum power fraction remaining = 0.04565809475309618
INFO: After iteration 25: maximum power fraction remaining = 0.04079725496573843
INFO: After iteration 26: maximum power fraction remaining = 0.036425366481773094
INFO: After iteration 27: maximum power fraction remaining = 0.03254416128412682
INFO: After iteration 28: maximum power fraction remaining = 0.029061293271114255
INFO: After iteration 29: maximum power fraction remaining = 0.025962972426405884
INFO: After iteration 30: maximum power fraction remaining = 0.02318687449659121
INFO: After iteration 31: maximum power fraction remaining = 0.02071389272627435
INFO: After iteration 32: maximum power fraction remaining = 0.018500357957723305
INFO: After iteration 33: maximum power fraction remaining = 0.016526703768016418
INFO: After iteration 34: maximum power fraction remaining = 0.014761314059235722
INFO: After iteration 35: maximum power fraction remaining = 0.013186275699979906
INFO: After iteration 36: maximum power fraction remaining = 0.01177807922347749
INFO: After iteration 37: maximum power fraction remaining = 0.010521207682390923
INFO: After iteration 38: maximum power fraction remaining = 0.009397815380879172
INFO: After iteration 1: maximum power fraction remaining = 0.7861249181870045
INFO: After iteration 2: maximum power fraction remaining = 0.6520356106744409
INFO: After iteration 3: maximum power fraction remaining = 0.5537300113761829
INFO: After iteration 4: maximum power fraction remaining = 0.4719955184218194
INFO: After iteration 5: maximum power fraction remaining = 0.40260506877025276
INFO: After iteration 6: maximum power fraction remaining = 0.3436142167213573
INFO: After iteration 7: maximum power fraction remaining = 0.2933042469851944
INFO: After iteration 8: maximum power fraction remaining = 0.25037412561055633
INFO: After iteration 9: maximum power fraction remaining = 0.21373164451848886
INFO: After iteration 10: maximum power fraction remaining = 0.1824531099045743
INFO: After iteration 11: maximum power fraction remaining = 0.15575252719375898
INFO: After iteration 12: maximum power fraction remaining = 0.13295952983662057
INFO: After iteration 13: maximum power fraction remaining = 0.11350215390445287
INFO: After iteration 14: maximum power fraction remaining = 0.09689220636306606
INFO: After iteration 15: maximum power fraction remaining = 0.08271297495981722
INFO: After iteration 16: maximum power fraction remaining = 0.07060873991013421
INFO: After iteration 17: maximum power fraction remaining = 0.06027584285274009
INFO: After iteration 18: maximum power fraction remaining = 0.05145506461255833
INFO: After iteration 19: maximum power fraction remaining = 0.04392512096803368
INFO: After iteration 20: maximum power fraction remaining = 0.03749711076025854
INFO: After iteration 21: maximum power fraction remaining = 0.03200977677504282
INFO: After iteration 22: maximum power fraction remaining = 0.027325460254824067
INFO: After iteration 23: maximum power fraction remaining = 0.023326647466858627
INFO: After iteration 24: maximum power fraction remaining = 0.019913021666735822
INFO: After iteration 25: maximum power fraction remaining = 0.016998946483185937
INFO: After iteration 26: maximum power fraction remaining = 0.014511317588150134
INFO: After iteration 27: maximum power fraction remaining = 0.012387728754539053
INFO: After iteration 28: maximum power fraction remaining = 0.010574906293982545
INFO: After iteration 29: maximum power fraction remaining = 0.009027372599341561</code></pre>
</div>
</div>
<p>Finally, we use TMM to calculate the absorption in a structure with a planar front and planar rear, as a reference.</p>
<div class="cell" data-jupyter="{&quot;outputs_hidden&quot;:false}" data-execution_count="28">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>struc <span class="op">=</span> tmm_structure([Layer(si(<span class="st">"200um"</span>), Si)], incidence<span class="op">=</span>Air, transmission<span class="op">=</span>Air)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>options.coherent <span class="op">=</span> <span class="va">False</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>options.coherency_list <span class="op">=</span> [<span class="st">"i"</span>]</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>RAT <span class="op">=</span> tmm_structure.calculate(struc, options)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="plotting" class="level2">
<h2 class="anchored" data-anchor-id="plotting">Plotting</h2>
<p>Plot everything together, including data from the reference paper for comparison:</p>
<div class="cell" data-jupyter="{&quot;outputs_hidden&quot;:false}" data-execution_count="29">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>palhf <span class="op">=</span> sns.color_palette(<span class="st">"hls"</span>, <span class="dv">4</span>)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> plt.figure()</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>plt.plot(sim_fig6[:, <span class="dv">0</span>], sim_fig6[:, <span class="dv">1</span>],</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"--"</span>, color<span class="op">=</span>palhf[<span class="dv">0</span>], label<span class="op">=</span><span class="st">"OPTOS - rear grating (1)"</span>)</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>plt.plot(wavelengths <span class="op">*</span> <span class="fl">1e9</span>, RAT_fig6[<span class="st">"A_bulk"</span>][<span class="dv">0</span>],</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"-o"</span>, color<span class="op">=</span>palhf[<span class="dv">0</span>], label<span class="op">=</span><span class="st">"RayFlare - rear grating (1)"</span>, fillstyle<span class="op">=</span><span class="st">"none"</span>)</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>plt.plot(sim_fig7[:, <span class="dv">0</span>], sim_fig7[:, <span class="dv">1</span>],</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"--"</span>, color<span class="op">=</span>palhf[<span class="dv">1</span>], label<span class="op">=</span><span class="st">"OPTOS - front pyramids (2)"</span>,)</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>plt.plot(wavelengths <span class="op">*</span> <span class="fl">1e9</span>, RAT_fig7[<span class="st">"A_bulk"</span>][<span class="dv">0</span>],</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"-o"</span>, color<span class="op">=</span>palhf[<span class="dv">1</span>], label<span class="op">=</span><span class="st">"RayFlare - front pyramids (2)"</span>, fillstyle<span class="op">=</span><span class="st">"none"</span>)</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>plt.plot(sim_fig8[:, <span class="dv">0</span>], sim_fig8[:, <span class="dv">1</span>],</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">"--"</span>, color<span class="op">=</span>palhf[<span class="dv">2</span>], label<span class="op">=</span><span class="st">"OPTOS - grating + pyramids (3)"</span>)</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>plt.plot(wavelengths <span class="op">*</span> <span class="fl">1e9</span>, RAT_fig8[<span class="st">"A_bulk"</span>][<span class="dv">0</span>],</span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">"-o"</span>, color<span class="op">=</span>palhf[<span class="dv">2</span>],label<span class="op">=</span><span class="st">"RayFlare - grating + pyramids (3)"</span>, fillstyle<span class="op">=</span><span class="st">"none"</span>,)</span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>plt.plot(wavelengths <span class="op">*</span> <span class="fl">1e9</span>, RAT[<span class="st">"A_per_layer"</span>][:, <span class="dv">0</span>], <span class="st">"-k"</span>, label<span class="op">=</span><span class="st">"Planar"</span>)</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>plt.legend(loc<span class="op">=</span><span class="st">"lower left"</span>)</span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"Wavelength (nm)"</span>)</span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">"Absorption in Si"</span>)</span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>plt.xlim([<span class="dv">900</span>, <span class="dv">1200</span>])</span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>plt.ylim([<span class="dv">0</span>, <span class="dv">1</span>])</span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="9-grating_pyramids_OPTOS_files/figure-html/cell-9-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>We can see good (qualitative) agreement between the reference values and our calculated values. The default values for the number of rays, RCWA orders, and bins in the angular redistribution matrix in this example are set to be quite low – agreement between the literature values and the values calculated before improves if these are increased (but the calculation takes much longer). The structure with rear grating also behaves identically to the planar TMM reference case at the short wavelengths where front surface reflection dominates the result, as expected. Clearly, the pyramids perform much better overall, giving a large boost in the absorption at long wavelengths and also reducing the reflection significantly at shorter wavelengths. Plotting reflection and transmission emphasises this:</p>
<div class="cell" data-jupyter="{&quot;outputs_hidden&quot;:false}" data-execution_count="30">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> plt.figure()</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>plt.plot(wavelengths <span class="op">*</span> <span class="fl">1e9</span>,RAT_fig6[<span class="st">"R"</span>][<span class="dv">0</span>],</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"-o"</span>, color<span class="op">=</span>palhf[<span class="dv">0</span>], label<span class="op">=</span><span class="st">"RayFlare - rear grating (1)"</span>, fillstyle<span class="op">=</span><span class="st">"none"</span>)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>plt.plot(wavelengths <span class="op">*</span> <span class="fl">1e9</span>, RAT_fig7[<span class="st">"R"</span>][<span class="dv">0</span>],</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"-o"</span>, color<span class="op">=</span>palhf[<span class="dv">1</span>], label<span class="op">=</span><span class="st">"RayFlare - front pyramids (2)"</span>, fillstyle<span class="op">=</span><span class="st">"none"</span>)</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>plt.plot(wavelengths <span class="op">*</span> <span class="fl">1e9</span>, RAT_fig8[<span class="st">"R"</span>][<span class="dv">0</span>],</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"-o"</span>, color<span class="op">=</span>palhf[<span class="dv">2</span>], label<span class="op">=</span><span class="st">"RayFlare - grating + pyramids (3)"</span>, fillstyle<span class="op">=</span><span class="st">"none"</span>)</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>plt.plot(wavelengths <span class="op">*</span> <span class="fl">1e9</span>, RAT_fig6[<span class="st">"T"</span>][<span class="dv">0</span>], <span class="st">"--o"</span>, color<span class="op">=</span>palhf[<span class="dv">0</span>])</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>plt.plot(wavelengths <span class="op">*</span> <span class="fl">1e9</span>, RAT_fig7[<span class="st">"T"</span>][<span class="dv">0</span>], <span class="st">"--o"</span>, color<span class="op">=</span>palhf[<span class="dv">1</span>])</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>plt.plot(wavelengths <span class="op">*</span> <span class="fl">1e9</span>, RAT_fig8[<span class="st">"T"</span>][<span class="dv">0</span>], <span class="st">"--o"</span>, color<span class="op">=</span>palhf[<span class="dv">2</span>])</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a><span class="co"># these are just to create the legend:</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>plt.plot(<span class="op">-</span><span class="dv">1</span>, <span class="dv">0</span>, <span class="st">"k-o"</span>, label<span class="op">=</span><span class="st">"R"</span>, fillstyle<span class="op">=</span><span class="st">"none"</span>)</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>plt.plot(<span class="op">-</span><span class="dv">1</span>, <span class="dv">0</span>, <span class="st">"k--o"</span>, label<span class="op">=</span><span class="st">"T"</span>)</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"Wavelength (nm)"</span>)</span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">"Reflected/transmitted fraction"</span>)</span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>plt.xlim([<span class="dv">900</span>, <span class="dv">1200</span>])</span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>plt.ylim([<span class="dv">0</span>, <span class="fl">0.6</span>])</span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="9-grating_pyramids_OPTOS_files/figure-html/cell-10-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="redistribution-matrices" class="level2">
<h2 class="anchored" data-anchor-id="redistribution-matrices">Redistribution matrices</h2>
<p>Plot the redistribution matrix for the rear grating (summed over azimuthal angles) at 1100 nm:</p>
<div class="cell" data-jupyter="{&quot;outputs_hidden&quot;:false}" data-execution_count="31">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>theta_intv, phi_intv, angle_vector <span class="op">=</span> make_angle_vector(</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>    options[<span class="st">"n_theta_bins"</span>], options[<span class="st">"phi_symmetry"</span>], options[<span class="st">"c_azimuth"</span>])</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>path <span class="op">=</span> get_savepath(save_location<span class="op">=</span><span class="st">'current'</span>, project_name<span class="op">=</span>options.project_name)</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>sprs <span class="op">=</span> load_npz(os.path.join(path, SC_fig6[<span class="dv">2</span>].name <span class="op">+</span> <span class="st">"frontRT.npz"</span>))</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>wl_to_plot <span class="op">=</span> <span class="fl">1100e-9</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>wl_index <span class="op">=</span> np.argmin(np.<span class="bu">abs</span>(wavelengths <span class="op">-</span> wl_to_plot))</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>full <span class="op">=</span> sprs[wl_index].todense()</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>summat <span class="op">=</span> theta_summary(full, angle_vector, options[<span class="st">"n_theta_bins"</span>], <span class="st">"front"</span>)</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>summat_r <span class="op">=</span> summat[: options[<span class="st">"n_theta_bins"</span>], :]</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>summat_r <span class="op">=</span> summat_r.rename({ <span class="vs">r"$\theta_</span><span class="sc">{in}</span><span class="vs">$"</span>: <span class="vs">r"$\sin(\theta_</span><span class="sc">{in}</span><span class="vs">)$"</span>,</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>        <span class="vs">r"$\theta_</span><span class="sc">{out}</span><span class="vs">$"</span>: <span class="vs">r"$\sin(\theta_</span><span class="sc">{out}</span><span class="vs">)$"</span>})</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>summat_r <span class="op">=</span> summat_r.assign_coords({<span class="vs">r"$\sin(\theta_</span><span class="sc">{in}</span><span class="vs">)$"</span>: np.sin(summat_r.coords[<span class="vs">r"$\sin(\theta_</span><span class="sc">{in}</span><span class="vs">)$"</span>]).data,</span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>    <span class="vs">r"$\sin(\theta_</span><span class="sc">{out}</span><span class="vs">)$"</span>: np.sin(summat_r.coords[<span class="vs">r"$\sin(\theta_</span><span class="sc">{out}</span><span class="vs">)$"</span>]).data})</span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>palhf <span class="op">=</span> sns.cubehelix_palette(<span class="dv">256</span>, start<span class="op">=</span><span class="fl">0.5</span>, rot<span class="op">=-</span><span class="fl">0.9</span>)</span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>palhf.reverse()</span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>seamap <span class="op">=</span> mpl.colors.ListedColormap(palhf)</span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> plt.figure()</span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> plt.subplot(<span class="dv">111</span>)</span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> summat_r.plot.imshow(ax<span class="op">=</span>ax, cmap<span class="op">=</span>seamap, vmax<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="9-grating_pyramids_OPTOS_files/figure-html/cell-11-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="questions" class="level2">
<h2 class="anchored" data-anchor-id="questions">Questions</h2>
<ul>
<li>If you can add only one of the textures (pyramids or a grating), which one is better? Why?</li>
<li>Why do the structures with a front-surface texture have high reflection at long wavelengths? The anti-reflection properties of pyramids (treated with ray optics) are mostly independent of the wavelength, so why does apparent reflection increase near the bandgap of Si?</li>
<li>Can you explain any of the features present in the angular redistribution matrix of the rear grating surface?</li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>